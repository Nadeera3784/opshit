const program = require('commander');
const express = require('express');
const fs = require('fs');
const mainroute = require('./routes');

const chalk = require('chalk');
const clear = require('clear');
const figlet = require('figlet');

const files = require('./config/files')
const kernel  = require('./app/kernel');



program
  .version('1.0.1')
  .description('Contact management system');

program
  .command('serve')
  .action(() => {
  		const app = express();
		app.get('/', mainroute);
  		app.listen(5000);
		console.log('opshit development server started on http://127.0.0.1:5000');
  });

program
  .command('make:ctrl <ctrlname>') // No need of specifying arguments here
  .alias('controller')
  .description('create a controller')
  .action((ctrlname) => {
    fs.writeFile('app/controllers/'+ctrlname +'Controller.js', 'exports.'+ctrlname+'Controller = (req, res, next) => { \n\n};', function (err) {
	  if (err) throw err;
	  console.log(ctrlname+'Controller is created successfully.');
	});
  });

program.parse(process.argv);



/*clear();

console.log(
  chalk.yellow(
    figlet.textSync('opshit', { horizontalLayout: 'full' })
  )
);

if (files.directoryExists('node_modules')) {
  console.log(chalk.green('Already initialized node_modules!'));
  process.exit();
}
else
{
  console.log(chalk.red('Already initialized node_modules!'));
}*/


/*const run = async () => {
  const credentials = await kernel.askGithubCredentials();
  console.log(credentials);
};

run();*/